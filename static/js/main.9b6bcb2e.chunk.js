(this.webpackJsonpcountdown_webapp=this.webpackJsonpcountdown_webapp||[]).push([[0],{15:function(e,t,n){e.exports={hs:"timerCards_hs__2M6B0",item:"timerCards_item__2bV62",container:"timerCards_container__3H4fw",body:"timerCards_body__1giQ0"}},22:function(e,t,n){e.exports={timer:"style_timer__3lsD1",title:"style_title__3_VNy",timer__active:"style_timer__active__2EszR"}},31:function(e,t){var n=function(){var e=self.performance.now();setInterval((function(){for(var t=function(){var t=self.performance.now(),n=Math.floor((t-e)/1e3);return 0!==n&&(e+=1e3*n),n}(),n=0;n<t;n++)self.postMessage("tick")}),1e3)}.toString();n=n.substring(n.indexOf("{")+1,n.lastIndexOf("}"));var r=new Blob([n],{type:"application/javascript"}),i=URL.createObjectURL(r);e.exports=i},34:function(e,t,n){e.exports={add_button:"style_add_button___aU4-"}},50:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=n(29),c=n.n(a),o=n(3),s=n(15),u=n.n(s),d=n(54),l=n(4),m=n(38),f=n(2),h=n.n(f),p=n(6),v=n(14),j=n.n(v);j.a.setDriver([j.a.INDEXEDDB,j.a.LOCALSTORAGE]);var b={getItem:function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.getItem(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setItem:function(e,t){return j.a.setItem(e,t)},removeItem:function(e){return j.a.removeItem(e)}},g=function(e){return b.setItem("timerCardIds",e)},x=function(){return b.getItem("timerCardIds")},w=function(e,t){return b.setItem("timerCard_".concat(e),t)},O=function(e){return b.getItem("timerCard_".concat(e))},y=function(e){return b.removeItem("timerCard_".concat(e))},T=n(13),C=n(9),k=n(11),D=n(21),I=n(20),_=n(30),N=n.n(_),S=n(33),E=n(31),R=function e(){Object(C.a)(this,e);for(var t={},n=this,r=0,i=0;i<arguments.length;i++){var a=arguments[i];switch(typeof a){case"string":t[a]=[],r++;break;case"object":n=a;break;default:throw new TypeError("Eventjs() only accepts string and object parameters")}}if(0===r)throw new Error("There should be at least one event name (string) for the Eventjs to be useful.");if(n===this&&!(this instanceof e))throw new ReferenceError('Eventjs is not called with "new" keyword and no parameter of type object is passed to it');function c(e){if("string"!==typeof e||!t[e])throw new ReferenceError("The event name does not exist in this event manager: "+e);return!0}return n.on=function(e){c(e);for(var n=1;n<arguments.length;n++){var r=arguments[n];-1===t[e].indexOf(r)&&t[e].push(r)}return this},n.off=function(e){switch(arguments.length){case 0:for(var r in t)t.hasOwnProperty(r)&&n.off(r);break;case 1:c(e),t[e].length=0;break;default:c(e);for(var i=1;i<arguments.length;i++){var a=arguments[i],o=t[e].indexOf(a);-1!==o&&t[e].splice(o,1)}}return this},n.trigger=function(e){c(e);for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);for(var a=t[e],o=[],s=0;s<a.length;s++){var u=a[s];try{u.apply(n,r)}catch(l){o.push({listener:u,error:l})}}if(o.length>0){var d=new Error("At least one of the event listeners was interrupted with an error. See errors");throw console.log(o),d.errors=o,d}return this},n},B=new Worker(n.n(E).a),L=function(e){Object(D.a)(n,e);var t=Object(I.a)(n);function n(){var e;return Object(C.a)(this,n),(e=t.call(this,"tick","finished")).time=void 0,e.playing=void 0,e.tick=function(t){setTimeout((function(){e.playing&&(e.time<0?(e.stop(),e.trigger("finished")):e.trigger("tick",e.time),e.time--)}),0)},e.time=0,e.playing=!1,e}return Object(k.a)(n,[{key:"play",value:function(e){this.time=e,this.playing=!0,B.addEventListener("message",this.tick)}},{key:"stop",value:function(){B.removeEventListener("message",this.tick),this.playing=!1,this.time=0}}]),n}(R),A=n(32),G=function(){function e(){Object(C.a)(this,e),this.player=void 0,this.handleId=void 0,this.player=void 0,this.handleId=void 0}return Object(k.a)(e,[{key:"play",value:function(e,t){var n=this;return!!e&&(this.player=new A.Howl({src:[e],format:["webm"],volume:1}),this.handleId=this.player.play(),t&&setTimeout((function(){n.player&&n.player.stop(n.handleId)}),1e3*t),!0)}},{key:"pause",value:function(){var e;null===(e=this.player)||void 0===e||e.pause(this.handleId)}},{key:"stop",value:function(){var e;null===(e=this.player)||void 0===e||e.stop(this.handleId)}}]),e}();function z(e,t){try{return new Notification(e,t),!0}catch(n){console.log(n)}navigator.serviceWorker.getRegistration().then((function(e){return!!e&&(e.showNotification("TimerCards",t),!0)})).catch((function(e){return console.log(e),!1}))}var M=function(e){if("Notification"in window){if("granted"===Notification.permission)return z("TimerCards",{body:e,vibrate:[200,100,200,100,200,100,200]});"denied"!==Notification.permission&&Notification.requestPermission().then((function(t){if("granted"===t)return z("TimerCards",{body:e,vibrate:[200,100,200,100,200,100,200]})}))}else alert("This browser does not support desktop notification")},P=n.p+"static/media/alarm.4ef57659.mp3",W=function(){function e(){Object(C.a)(this,e)}return Object(k.a)(e,[{key:"save",value:function(e,t){return b.setItem("audio_meta_".concat(e),t)}},{key:"load",value:function(e){return b.getItem("audio_meta_".concat(e))}},{key:"delete",value:function(e){return b.removeItem("audio_meta_".concat(e))}}]),e}(),U=new(function(){function e(){Object(C.a)(this,e),this.metaStorage=void 0,this.metaStorage=new W}return Object(k.a)(e,[{key:"loadAudioIds",value:function(){return b.getItem("audioIds")}},{key:"saveAudioIds",value:function(e){return b.setItem("audioIds",e)}},{key:"save",value:function(){var e=Object(p.a)(h.a.mark((function e(t,n,r){var i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadAudioIds();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return(i=e.t0).push(t),e.next=9,this.saveAudioIds(i);case 9:return e.next=11,this.metaStorage.save(t,Object(T.a)(Object(T.a)({},r),{},{id:t,createdAt:Date.now()}));case 11:return e.abrupt("return",b.setItem("audio_".concat(t),n));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"load",value:function(e){return b.getItem("audio_".concat(e))}},{key:"delete",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadAudioIds();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return n=e.t0,e.next=8,this.saveAudioIds(n.filter((function(e){return e!==t})));case 8:return e.next=10,this.metaStorage.delete(t);case 10:return e.abrupt("return",b.removeItem("audio_".concat(t)));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editMeta",value:function(e,t){return this.metaStorage.save(e,t)}},{key:"loadMeta",value:function(e){return this.metaStorage.load(e)}}]),e}()),V=function(e){Object(D.a)(n,e);var t=Object(I.a)(n);function n(e){var r;return Object(C.a)(this,n),(r=t.call(this)).timerCardData=void 0,r.timerCardId=void 0,r.countDownTimer=void 0,r.runningTimer=void 0,r.audioPlayer=void 0,r.onTimerTick=function(e){r.runningTimer.remainingTime=e,r.emitRunningTimer()},r.onTimerFinished=function(){try{var e,t=null===(e=r.timerCardData.currentTimer)||void 0===e?void 0:e.id,n=r.timerCardData.timerGroup.timers.findIndex((function(e){return e.id===t}));if(r.timerFinished(r.timerCardData.currentTimer.id),r.timerCardData.timerGroup.timers[n+1]){var i=r.timerCardData.timerGroup.timers[n+1];r.updateCardData((function(e){e.currentTimer={id:i.id,remainingTime:i.time,totalTime:i.time}})),r.emit("_play")}else if(r.timerCardData.looping){var a=r.timerCardData.timerGroup.timers[0];r.updateCardData((function(e){e.currentTimer={id:a.id,remainingTime:a.time,totalTime:a.time}})),r.emit("_play")}else r.emit("_stop")}catch(c){console.log(c),console.log(r.timerCardData)}},r.playCard=function(){if(r.timerCardData.currentTimer)r.updateCardData((function(e){e.status="playing"})),r.runningTimer.id=r.timerCardData.currentTimer.id,r.runningTimer.remainingTime=r.timerCardData.currentTimer.remainingTime,r.emitRunningTimer(),r.countDownTimer.off("tick"),r.countDownTimer.off("finished"),r.countDownTimer.on("tick",r.onTimerTick),r.countDownTimer.on("finished",r.onTimerFinished),r.countDownTimer.play(r.timerCardData.currentTimer.remainingTime);else{var e=r.timerCardData.timerGroup.timers[0];e&&(r.updateCardData((function(t){t.currentTimer={id:e.id,remainingTime:e.time,totalTime:e.time},t.status="playing"})),r.runningTimer.id=r.timerCardData.currentTimer.id,r.runningTimer.remainingTime=r.timerCardData.currentTimer.remainingTime,r.emitRunningTimer(),r.countDownTimer.off("tick"),r.countDownTimer.off("finished"),r.countDownTimer.on("tick",r.onTimerTick),r.countDownTimer.on("finished",r.onTimerFinished),r.countDownTimer.play(r.timerCardData.currentTimer.remainingTime))}},r.pauseCard=function(){r.countDownTimer.stop(),r.updateCardData((function(e){e.status="paused",e.currentTimer.remainingTime=r.runningTimer.remainingTime}))},r.stopCard=function(){r.countDownTimer.stop(),r.runningTimer={id:"",remainingTime:0},r.updateCardData((function(e){e.status="stopped",e.currentTimer=void 0})),r.emitRunningTimer()},r.timerCardId=e,r.timerCardData={id:r.timerCardId,timerGroup:{id:Object(d.a)(),name:"unnamed",timers:[]},looping:!1,status:"stopped",currentTimer:void 0},r.load(),r.audioPlayer=new G,r.runningTimer={id:"",remainingTime:0},r.countDownTimer=new L,r.on("new_connection",(function(){r.emitTimerCardData(),r.emitRunningTimer()})),r.on("_play",(function(){r.playCard()})),r.on("_stop",(function(){r.stopCard()})),r}return Object(k.a)(n,[{key:"getTimerData",value:function(){return this.timerCardData}},{key:"emitTimerCardData",value:function(){this.emit("timer_data",this.timerCardData)}},{key:"emitRunningTimer",value:function(){this.emit("running_timer",Object(T.a)({},this.runningTimer))}},{key:"updateCardData",value:function(e){this.timerCardData=Object(S.a)(this.timerCardData,e),this.emitTimerCardData(),this.save()}},{key:"timerFinished",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,i,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.timerCardData.timerGroup.name,r=this.timerCardData.timerGroup.timers.find((function(e){return e.id===t})),M("".concat(n," => ").concat(null===r||void 0===r?void 0:r.name," finished")),!(i=null===r||void 0===r?void 0:r.options.audioId)){e.next=11;break}return e.next=7,U.load(i);case 7:a=e.sent,this.audioPlayer.play(URL.createObjectURL(a)),e.next=12;break;case 11:"speechSynthesis"in window?speechSynthesis.speak(new SpeechSynthesisUtterance("".concat(null===r||void 0===r?void 0:r.name," timer. finished playing"))):this.audioPlayer.play(P,2);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addTimer",value:function(e){var t=e.name,n=e.time;this.updateCardData((function(e){e.timerGroup.timers.push({id:Object(d.a)(),name:t,time:n,options:{}})}))}},{key:"removeTimer",value:function(e){this.updateCardData((function(t){t.timerGroup.timers=null===t||void 0===t?void 0:t.timerGroup.timers.filter((function(t){return t.id!==e}))}))}},{key:"toggleLoop",value:function(){this.updateCardData((function(e){e.looping=!e.looping}))}},{key:"editTimer",value:function(e,t){this.updateCardData((function(n){var r=n.timerGroup.timers.map((function(n){return n.id!==e?n:Object(T.a)(Object(T.a)({},n),t)}));n.timerGroup.timers=r}))}},{key:"addAudioToTimer",value:function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,i,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.timerCardData.timerGroup.timers.find((function(e){return e.id===t})),i=Object(d.a)(),e.next=4,U.save(i,n,{name:"".concat(null===r||void 0===r?void 0:r.name,"_").concat(i)});case 4:if(a=null===r||void 0===r?void 0:r.options.audioId,e.t0=a,!e.t0){e.next=9;break}return e.next=9,U.delete(a);case 9:this.updateCardData((function(e){e.timerGroup.timers=e.timerGroup.timers.map((function(e){return t!==e.id||(e.options.audioId=i),e}))}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeAudioFromTimer",value:function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"renameTimerCard",value:function(e){this.updateCardData((function(t){t.timerGroup.name=e}))}},{key:"onTimerCardDelete",value:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.countDownTimer.stop(),this.countDownTimer.off("tick"),this.countDownTimer.off("finished"),e.next=5,this.deleteStorageData();case 5:this.removeAllListeners();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=JSON.parse(JSON.stringify(this.timerCardData));"playing"===e.status&&(e.status="paused",e.currentTimer.remainingTime=this.runningTimer.remainingTime),w(this.timerCardId,e)}},{key:"load",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(this.timerCardId);case 2:(t=e.sent)&&(this.timerCardData=t,this.updateCardData((function(e){})),t.currentTimer&&(this.runningTimer={id:t.currentTimer.id,remainingTime:t.currentTimer.remainingTime},this.emitRunningTimer()));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteStorageData",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.timerCardData.timerGroup.timers.forEach((function(e){var n=e.options.audioId;n&&t.push(U.delete(n))})),e.next=4,Promise.all(t);case 4:return e.abrupt("return",y(this.timerCardId));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(N.a),F=n(0),H=i.a.createContext({Timercards:{},actions:{},timerCardsId:[]});function J(e){var t=Object(r.useRef)({}),n=Object(r.useState)([]),i=Object(l.a)(n,2),a=i[0],c=i[1],o=Object(r.useCallback)((function(e){return new V(e)}),[]);Object(r.useEffect)((function(){(function(){var e=Object(p.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:n.forEach((function(e){if(e){var n=o(e);t.current[e]=n}})),c(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o]),Object(r.useEffect)((function(){var e=function(){g(a),a.forEach((function(e){t.current[e].save()}))};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[a]);var s=function(){var e=Object(p.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.current[n].onTimerCardDelete();case 2:delete t.current[n],c((function(e){return e.filter((function(e){return e!==n}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsx)(H.Provider,{value:{Timercards:t.current,timerCardsId:a,actions:{addTimerCard:function(e){var n=o(e);t.current[e]=n,c((function(t){return[].concat(Object(m.a)(t),[e])}))},deleteTimerCard:s}},children:e.children})}var q=n.p+"static/media/close.e5dc2726.svg",X=n(22),Q=n.n(X);var Y=function(e){var t=e.onNameChange,n=e.onTimeChange,i=e.onDelete,a=e.onRecordStart,c=e.onRecordStop,o=e.id,s=e.name,u=e.time,d=e.active,m=Object(r.useState)(0),f=Object(l.a)(m,2),h=f[0],p=f[1],v=Object(r.useState)(0),j=Object(l.a)(v,2),b=j[0],g=j[1],x=Object(r.useState)((function(){return!1})),w=Object(l.a)(x,2),O=w[0],y=w[1],T=Object(r.useState)(!1),C=Object(l.a)(T,2),k=C[0],D=C[1];return Object(r.useEffect)((function(){if(u){var e=parseInt(u/60),t=parseInt(u%60);p(e),g(t)}}),[u]),Object(F.jsxs)("div",{id:e.id,className:"my-1 rounded-lg ".concat(Q.a.timer," ").concat(d?Q.a.timer__active:""),children:[Object(F.jsx)("div",{className:"".concat(Q.a.title," w-full rounded-t-lg  border border-b-0 border-gray-300 px-1 "),children:Object(F.jsxs)("div",{className:" flex flex-row justify-between items-center",children:[Object(F.jsx)("div",{onClick:function(){return y(!0)},children:O?Object(F.jsx)("form",{onSubmit:function(e){e.preventDefault(),y(!1),t(e.currentTarget.title.value)},onBlur:function(e){t(e.currentTarget.title.value),y(!1)},children:Object(F.jsx)("input",{autoFocus:!0,autoComplete:"off",type:"text",defaultValue:s,name:"title"})}):s}),Object(F.jsx)("div",{className:"ml-auto mr-4",children:Object(F.jsx)("button",{onClick:function(){(k?c:a)(),D(!k)},children:k?"Stop":"Record"})}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{className:"select-none flex items-center rounded-full transition duration-150 hover:elevation-2 transform hover:scale-110",onClick:function(){i(o)},children:Object(F.jsx)("img",{className:"h-4 w-auto",src:q,alt:""})})})]})}),Object(F.jsx)("div",{className:"border border-t-0 rounded-b-lg  border-gray-300",children:Object(F.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=parseInt(e.currentTarget.mins.value),r=parseInt(e.currentTarget.secs.value),i=0;t&&(i+=60*t),r&&(i+=r),n(i)},onBlur:function(e){var t=parseInt(e.currentTarget.mins.value),r=parseInt(e.currentTarget.secs.value),i=0;t&&(i+=60*t),r&&(i+=r),n(i)},className:"text-center py-2",children:[Object(F.jsx)("input",{name:"mins",style:{width:"3em"},type:"number",placeholder:"m",onChange:function(e){return p(e.target.value)},value:h}),Object(F.jsx)("span",{className:"mx-1",children:":"}),Object(F.jsx)("input",{name:"secs",style:{width:"3em"},type:"number",placeholder:"s",onChange:function(e){return g(e.target.value)},value:b})]})})]})},$=n.p+"static/media/close.e5dc2726.svg",K=n(34),Z=n.n(K);function ee(e){var t=e.isPlaying,n=void 0!==t&&t,r=e.onChange,i=void 0===r?function(){}:r;return Object(F.jsx)("div",{test:"playButton",className:"cursor-pointer",onClick:function(){i(!n)},children:n?Object(F.jsxs)("svg",{style:{fill:"#007bff"},className:"h-8 w-auto",height:"512",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 477.867 477.867",children:[Object(F.jsx)("g",{children:Object(F.jsx)("g",{children:Object(F.jsx)("path",{d:"M187.733,0H51.2c-9.426,0-17.067,7.641-17.067,17.067V460.8c0,9.426,7.641,17.067,17.067,17.067h136.533 c9.426,0,17.067-7.641,17.067-17.067V17.067C204.8,7.641,197.159,0,187.733,0z M170.667,443.733h-102.4v-409.6h102.4V443.733z"})})}),Object(F.jsx)("g",{children:Object(F.jsx)("g",{children:Object(F.jsx)("path",{d:"M426.667,0H290.133c-9.426,0-17.067,7.641-17.067,17.067V460.8c0,9.426,7.641,17.067,17.067,17.067h136.533 c9.426,0,17.067-7.641,17.067-17.067V17.067C443.733,7.641,436.092,0,426.667,0z M409.6,443.733H307.2v-409.6h102.4V443.733z"})})})]}):Object(F.jsx)("svg",{style:{fill:"#007bff"},className:"h-8 w-auto",height:"512",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 477.886 477.886",children:Object(F.jsx)("g",{children:Object(F.jsx)("g",{children:Object(F.jsx)("path",{d:"M476.091,231.332c-1.654-3.318-4.343-6.008-7.662-7.662L24.695,1.804C16.264-2.41,6.013,1.01,1.8,9.442 c-1.185,2.371-1.801,4.986-1.8,7.637v443.733c-0.004,9.426,7.633,17.07,17.059,17.075c2.651,0.001,5.266-0.615,7.637-1.8 L468.429,254.22C476.865,250.015,480.295,239.768,476.091,231.332z M34.133,433.198V44.692l388.506,194.253L34.133,433.198z"})})})})})}function te(e){var t=e.looping,n=void 0!==t&&t,r=e.onChange,i=void 0===r?function(){}:r;return Object(F.jsx)("div",{className:"cursor-pointer",onClick:function(){i(!n)},children:n?Object(F.jsxs)("svg",{className:"h-8 w-auto",style:{fill:"#007bff"},id:"Layer",enableBackground:"new 0 0 64 64",height:"512",viewBox:"0 0 64 64",width:"512",xmlns:"http://www.w3.org/2000/svg",children:[Object(F.jsx)("path",{d:"m19 25h9c1.104 0 2-.896 2-2s-.896-2-2-2h-9c-6.065 0-11 4.935-11 11s4.935 11 11 11h4.172l-1.586 1.586c-.781.781-.781 2.047 0 2.828.391.391.902.586 1.414.586s1.023-.195 1.414-.586l5-5c.781-.781.781-2.047 0-2.828l-5-5c-.781-.781-2.047-.781-2.828 0s-.781 2.047 0 2.828l1.586 1.586h-4.172c-3.859 0-7-3.141-7-7 0-3.86 3.141-7 7-7z"}),Object(F.jsx)("path",{d:"m45 21h-4.172l1.586-1.586c.781-.781.781-2.047 0-2.828s-2.047-.781-2.828 0l-5 5c-.781.781-.781 2.047 0 2.828l5 5c.391.391.902.586 1.414.586s1.023-.195 1.414-.586c.781-.781.781-2.047 0-2.828l-1.586-1.586h4.172c3.859 0 7 3.14 7 7 0 3.859-3.141 7-7 7h-9c-1.104 0-2 .896-2 2s.896 2 2 2h9c6.065 0 11-4.935 11-11s-4.935-11-11-11z"})]}):Object(F.jsxs)("svg",{className:"h-8 w-auto",style:{fill:" #dadada"},id:"Layer",enableBackground:"new 0 0 64 64",height:"512",viewBox:"0 0 64 64",width:"512",xmlns:"http://www.w3.org/2000/svg",children:[Object(F.jsx)("path",{d:"m19 25h9c1.104 0 2-.896 2-2s-.896-2-2-2h-9c-6.065 0-11 4.935-11 11s4.935 11 11 11h4.172l-1.586 1.586c-.781.781-.781 2.047 0 2.828.391.391.902.586 1.414.586s1.023-.195 1.414-.586l5-5c.781-.781.781-2.047 0-2.828l-5-5c-.781-.781-2.047-.781-2.828 0s-.781 2.047 0 2.828l1.586 1.586h-4.172c-3.859 0-7-3.141-7-7 0-3.86 3.141-7 7-7z"}),Object(F.jsx)("path",{d:"m45 21h-4.172l1.586-1.586c.781-.781.781-2.047 0-2.828s-2.047-.781-2.828 0l-5 5c-.781.781-.781 2.047 0 2.828l5 5c.391.391.902.586 1.414.586s1.023-.195 1.414-.586c.781-.781.781-2.047 0-2.828l-1.586-1.586h4.172c3.859 0 7 3.14 7 7 0 3.859-3.141 7-7 7h-9c-1.104 0-2 .896-2 2s.896 2 2 2h9c6.065 0 11-4.935 11-11s-4.935-11-11-11z"})]})})}var ne=function(e){var t=e.isStopped,n=e.onChange,r=void 0===n?function(){}:n;return Object(F.jsx)("div",{test:"stopButton",className:"cursor-pointer",onClick:function(){return r(!t)},children:t?Object(F.jsx)("div",{className:"mx-2 h-auto my-1",style:{width:"2rem"},children:Object(F.jsx)("svg",{style:{fill:"#dadada"},className:"h-8 w-auto",id:"Capa_1",enableBackground:"new 0 0 512 512",height:"512",viewBox:"0 0 512 512",width:"512",xmlns:"http://www.w3.org/2000/svg",children:Object(F.jsxs)("g",{children:[Object(F.jsx)("path",{d:"m256 0c-141.159 0-256 114.841-256 256s114.841 256 256 256 256-114.841 256-256-114.841-256-256-256zm115 356c0 8.284-6.716 15-15 15h-200c-8.284 0-15-6.716-15-15v-200c0-8.284 6.716-15 15-15h200c8.284 0 15 6.716 15 15z"}),Object(F.jsx)("path",{d:"m171 171h170v170h-170z"})]})})}):Object(F.jsx)("div",{className:"mx-2 h-auto my-1",style:{width:"2rem"},children:Object(F.jsx)("svg",{className:"h-8 w-auto",style:{fill:"#007bff"},id:"Capa_1",enableBackground:"new 0 0 512 512",height:"512",viewBox:"0 0 512 512",width:"512",xmlns:"http://www.w3.org/2000/svg",children:Object(F.jsxs)("g",{children:[Object(F.jsx)("path",{d:"m256 0c-141.159 0-256 114.841-256 256s114.841 256 256 256 256-114.841 256-256-114.841-256-256-256zm115 356c0 8.284-6.716 15-15 15h-200c-8.284 0-15-6.716-15-15v-200c0-8.284 6.716-15 15-15h200c8.284 0 15 6.716 15 15z"}),Object(F.jsx)("path",{d:"m171 171h170v170h-170z"})]})})})})};function re(e){var t,n=e.onDelete,a=e.timerCardId,c=e.className,o=Object(r.useState)((function(){return!1})),s=Object(l.a)(o,2),u=s[0],d=s[1],m=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n=Object(r.useRef)([]),i=Object(r.useState)(),a=Object(l.a)(i,2),c=a[0],o=a[1];function s(){return(s=Object(p.a)(h.a.mark((function r(){return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 2:e.current=r.sent,n.current=[],t.current=new MediaRecorder(e.current,{mimeType:"audio/webm"}),t.current.addEventListener("dataavailable",(function(e){e.data.size>0&&n.current.push(e.data)})),t.current.addEventListener("stop",(function(e){if(n.current){var t=Object(l.a)(n.current,1)[0];o(new Blob(n.current,{type:t.type}))}})),t.current.start(100);case 8:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return{record:function(){return s.apply(this,arguments)},stopRecording:function(){t.current&&(t.current.stop(),t.current=null),e.current&&(e.current.getTracks().forEach((function(e){return e.stop()})),e.current=null);var r=Object(l.a)(n.current,1)[0];return new Blob(n.current,{type:r.type})},audioBlob:c}}(),f=m.record,v=m.stopRecording,j=function(e){var t=i.a.useContext(H).Timercards,n=Object(r.useState)(),a=Object(l.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)({id:"",remainingTime:0}),u=Object(l.a)(s,2),d=u[0],m=u[1],f=Object(r.useState)(null),h=Object(l.a)(f,2),p=h[0],v=h[1];return Object(r.useEffect)((function(){return v(t[e]),function(){v(null)}}),[t,e]),Object(r.useEffect)((function(){if(p){var e=function(e){o(e)},t=function(e){m(e)};return p.on("timer_data",e),p.on("running_timer",t),p.emit("new_connection"),function(){p.off("timer_data",e),p.off("running_timer",t)}}}),[p]),{timerCardData:c,runningTimer:d,actions:p}}(a),b=j.timerCardData,g=j.runningTimer,x=j.actions,w=function(e,t){var n=Object(r.useContext)(H).Timercards,i=Object(r.useState)([]),a=Object(l.a)(i,2),c=a[0],o=a[1];return Object(r.useEffect)((function(){var r=function(e){var n=e.timerGroup.timers,r=0;n.forEach((function(e){return r+=e.time}));for(var i=[],a=0;a<t;a++){var c=r+r*a;i.push(new Date(Date.now()+1e3*c))}o(i)},i=n[e];return r(i.getTimerData()),i.on("timer_data",r),function(){i.off("timer_data",r)}}),[n,t,e]),c}(a,5);return Object(r.useEffect)((function(){return w.forEach((function(e,t){console.log("".concat(t+1," ").concat(e.toLocaleString()))})),function(){}}),[w]),b?Object(F.jsxs)("div",{className:"bg-white rounded-lg ".concat(c),children:[Object(F.jsxs)("div",{className:"flex justify-between align-items-center",children:[Object(F.jsx)("div",{className:"text-center font-medium cursor-pointer fancy-scrollbar mr-2",children:Object(F.jsx)("div",{onClick:function(){return d(!0)},children:u?Object(F.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=e.currentTarget.title.value;t&&x.renameTimerCard(t),d(!1)},onBlur:function(e){e.preventDefault();var t=e.currentTarget.title.value;t&&x.renameTimerCard(t),d(!1)},children:Object(F.jsx)("input",{autoFocus:!0,type:"text",name:"title",defaultValue:b.timerGroup.name})}):b.timerGroup.name})}),Object(F.jsx)("button",{test:"closeButton",className:"select-none outline-none rounded-full transition duration-150 hover:elevation-2 transform hover:scale-110",onClick:function(){n(a)},children:Object(F.jsx)("img",{className:"h-6 w-auto",src:$,alt:""})})]}),Object(F.jsxs)("div",{className:"flex flex-col min-h-0",children:[Object(F.jsxs)("div",{className:"text-7xl font-mono tracking-tighter font-medium text-center select-none ",children:[parseInt(g.remainingTime/60)<=9?"0"+parseInt(g.remainingTime/60):parseInt(g.remainingTime/60),":",g.remainingTime%60<=9?"0"+g.remainingTime%60:g.remainingTime%60]}),Object(F.jsx)("hr",{}),Object(F.jsxs)("div",{className:"flex mt-2",children:[Object(F.jsx)("div",{className:" mx-2 h-8 w-auto my-1",children:Object(F.jsx)(ee,{isPlaying:"playing"===(null===b||void 0===b?void 0:b.status),onChange:function(e){e?x.playCard():x.pauseCard()}})}),Object(F.jsx)(ne,{isStopped:"stopped"===(null===b||void 0===b?void 0:b.status),onChange:function(e){e&&x.stopCard()}}),Object(F.jsx)("div",{className:"px-0 user-select-none ml-auto",children:Object(F.jsx)(te,{looping:null===b||void 0===b?void 0:b.looping,onChange:function(){x.toggleLoop()}})})]}),Object(F.jsx)("div",{className:"overflow-auto fancy-scrollbar px-1  ",children:null===b||void 0===b||null===(t=b.timerGroup)||void 0===t?void 0:t.timers.map((function(e){return e?Object(F.jsx)(Y,{id:e.id,active:g.id===e.id,onDelete:function(t){x.removeTimer(e.id)},onNameChange:function(t){x.editTimer(e.id,{name:t})},onTimeChange:function(t){x.editTimer(e.id,{time:t})},name:e.name,time:e.time,onRecordStart:function(){f()},onRecordStop:function(){var t=v();x.addAudioToTimer(e.id,t)}},e.id):null}))}),Object(F.jsx)("div",{className:"flex justify-center mt-4",children:Object(F.jsx)("button",{test:"addButton",className:Z.a.add_button,onClick:function(){x.addTimer({name:"unnamed",time:60})},children:"Add Timer"})})]})]}):Object(F.jsx)("div",{})}function ie(e){var t=function(){var e=i.a.useContext(H),t=e.actions;return{allTimerCardsId:e.timerCardsId,createTimerCard:function(e){t.addTimerCard(e)},deleteTimerCard:function(e){t.deleteTimerCard(e)}}}(),n=t.allTimerCardsId,r=t.createTimerCard,a=t.deleteTimerCard;return Object(F.jsxs)("div",{children:[Object(F.jsx)("section",{className:u.a.container,children:Object(F.jsx)("div",{className:u.a.body,children:Object(F.jsxs)("div",{className:" ".concat(u.a.hs," fancy-scrollbar"),style:{alignItems:"flex-start"},children:[n.map((function(e){return Object(F.jsx)(re,{className:u.a.item,timerCardId:e,onDelete:function(e){a(e)}},e)})),Object(F.jsx)("div",{className:u.a.item,children:Object(F.jsx)("button",{test:"addTimerCardButton",className:"select-none bg-blue-600 text-white px-4 py-2 rounded-full",onClick:function(){r(Object(d.a)())},children:"Add Timer Card"})})]})})}),Object(F.jsxs)("div",{className:"bg-gray-100",children:[Object(F.jsxs)("section",{id:"footer",className:"container mx-auto px-2 md:px-4 py-4",children:[Object(F.jsx)("h1",{className:"text-5xl font-bold text-center mb-4",children:"TimerCards"}),Object(F.jsxs)("div",{className:"mb-4",children:[Object(F.jsx)("h5",{className:"font-bold text-2xl",children:"What is TimerCards?"}),Object(F.jsx)("p",{children:"Timercard is an app that consists of cards (timercards) and those cards consist of timers. Every card is capable of sequentially playing timers created in it."})]}),Object(F.jsxs)("div",{className:"mb-4",children:[Object(F.jsx)("h5",{className:"font-bold text-2xl",children:"What can I do with it?"}),Object(F.jsx)("p",{children:"Well I don't know what can you do with it but I can tell what I do with it. I use it to make a Pomdoro timer (a card with two timers 25 mins and 5 mins), a card for water drinking (30 min timercard) and a card for workout."})]}),Object(F.jsx)("div",{children:Object(F.jsxs)("p",{children:["I would love to hear your"," ",Object(F.jsx)("a",{className:"text-green-600",href:"mailto:himanshunegi378@gmail.com",children:"Feedback / Sugesstions"})]})})]}),Object(F.jsx)("section",{className:"mb-4",children:Object(F.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:Object(F.jsx)("a",{href:"https://github.com/himanshunegi378/branching-timer-web-app",target:"_noreferrer",className:"bg-gray-700 p-2 font-semibold text-white inline-flex items-center space-x-2 rounded",children:Object(F.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:"w-5",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",children:Object(F.jsx)("g",{fill:"none",children:Object(F.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385c.6.105.825-.255.825-.57c0-.285-.015-1.23-.015-2.235c-3.015.555-3.795-.735-4.035-1.41c-.135-.345-.72-1.41-1.23-1.695c-.42-.225-1.02-.78-.015-.795c.945-.015 1.62.87 1.845 1.23c1.08 1.815 2.805 1.305 3.495.99c.105-.78.42-1.305.765-1.605c-2.67-.3-5.46-1.335-5.46-5.925c0-1.305.465-2.385 1.23-3.225c-.12-.3-.54-1.53.12-3.18c0 0 1.005-.315 3.3 1.23c.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23c.66 1.65.24 2.88.12 3.18c.765.84 1.23 1.905 1.23 3.225c0 4.605-2.805 5.625-5.475 5.925c.435.375.81 1.095.81 2.22c0 1.605-.015 2.895-.015 3.3c0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z",fill:"currentColor"})})})})})})]})]})}var ae=function(e){return Object(r.useEffect)((function(){document.body.classList.remove("page-loading"),document.body.classList.add("page-loaded"),document.body.classList.add("bg-gray-50")}),[]),Object(F.jsx)(r.Fragment,{children:Object(F.jsxs)(o.c,{children:[Object(F.jsx)(o.a,{exact:!0,path:"/",children:Object(F.jsx)(ie,{})}),Object(F.jsx)(o.a,{path:"/audio",children:Object(F.jsx)("h1",{children:"A page for Audio Management"})})]})})},ce=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function oe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(50);var se=n(18),ue=n(37),de=Object(r.createContext)({speak:function(){}});function le(e){var t=e.children,n=Object(ue.useSpeechSynthesis)(),i=n.speak,a=n.cancel,c=n.speaking,o=n.supported,s=Object(r.useCallback)((function(e){o&&(c&&a(),i(e))}),[a,i,c,o]);return Object(F.jsx)(de.Provider,{value:{speak:s},children:t})}c.a.render(Object(F.jsx)(i.a.StrictMode,{children:Object(F.jsx)(le,{children:Object(F.jsx)(J,{children:Object(F.jsx)(se.a,{children:Object(F.jsx)(ae,{})})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("activate",(function(e){e.waitUntil(caches.keys().then((function(e){return Promise.all(e.filter((function(e){return!1})).map((function(e){return caches.delete(e)})))})))})),window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ce?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):oe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):oe(t,e)}))}}()}},[[53,1,2]]]);