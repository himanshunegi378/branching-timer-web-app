(this.webpackJsonpcountdown_webapp=this.webpackJsonpcountdown_webapp||[]).push([[0],{15:function(e,t,n){e.exports={timer:"style_timer__3lsD1",title:"style_title__3_VNy",timer__active:"style_timer__active__2EszR"}},20:function(e,t,n){e.exports={add_button:"style_add_button___aU4-"}},22:function(e,t){var n=function(){var e=self.performance.now();setInterval((function(){for(var t=function(){var t=self.performance.now(),n=Math.floor((t-e)/1e3);return 0!==n&&(e+=1e3*n),n}(),n=0;n<t;n++)self.postMessage("tick")}),1e3)}.toString();n=n.substring(n.indexOf("{")+1,n.lastIndexOf("}"));var r=new Blob([n],{type:"application/javascript"}),i=URL.createObjectURL(r);e.exports=i},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=n(19),c=n.n(a),o=n(8),s=n.n(o),u=n(33),d=n(4),l=n.p+"static/media/close.96841b05.svg",m=n(15),f=n.n(m),h=n(0);var v=function(e){var t=e.onNameChange,n=e.onTimeChange,i=e.onDelete,a=e.onRecordStart,c=e.onRecordStop,o=e.id,s=e.name,u=e.time,m=e.active,v=Object(r.useState)(0),p=Object(d.a)(v,2),j=p[0],b=p[1],g=Object(r.useState)(0),x=Object(d.a)(g,2),w=x[0],O=x[1],y=Object(r.useState)((function(){return!1})),T=Object(d.a)(y,2),C=T[0],k=T[1],D=Object(r.useState)(!1),I=Object(d.a)(D,2),_=I[0],N=I[1];return Object(r.useEffect)((function(){if(u){var e=parseInt(u/60),t=parseInt(u%60);b(e),O(t)}}),[u]),Object(h.jsxs)("div",{id:e.id,className:"my-1 rounded-lg ".concat(f.a.timer," ").concat(m?f.a.timer__active:""),children:[Object(h.jsx)("div",{className:"".concat(f.a.title," w-full rounded-t-lg  border border-b-0 border-gray-300 px-1 "),children:Object(h.jsxs)("div",{className:" flex flex-row justify-between items-center",children:[Object(h.jsx)("div",{onClick:function(){return k(!0)},children:C?Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault(),k(!1),t(e.currentTarget.title.value)},onBlur:function(e){t(e.currentTarget.title.value),k(!1)},children:Object(h.jsx)("input",{autoFocus:!0,autoComplete:"off",type:"text",defaultValue:s,name:"title"})}):s}),Object(h.jsx)("div",{className:"ml-auto mr-4",children:Object(h.jsx)("button",{onClick:function(){(_?c:a)(),N(!_)},children:_?"Stop":"Record"})}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{className:"select-none flex items-center rounded-full transition duration-150 hover:elevation-2 transform hover:scale-110",onClick:function(){i(o)},children:Object(h.jsx)("img",{className:"h-4 w-auto",src:l,alt:""})})})]})}),Object(h.jsx)("div",{className:"border border-t-0 rounded-b-lg  border-gray-300",children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=parseInt(e.currentTarget.mins.value),r=parseInt(e.currentTarget.secs.value),i=0;t&&(i+=60*t),r&&(i+=r),n(i)},onBlur:function(e){var t=parseInt(e.currentTarget.mins.value),r=parseInt(e.currentTarget.secs.value),i=0;t&&(i+=60*t),r&&(i+=r),n(i)},className:"text-center py-2",children:[Object(h.jsx)("input",{name:"mins",style:{width:"3em"},type:"number",placeholder:"m",onChange:function(e){return b(e.target.value)},value:j}),Object(h.jsx)("span",{className:"mx-1",children:":"}),Object(h.jsx)("input",{name:"secs",style:{width:"3em"},type:"number",placeholder:"s",onChange:function(e){return O(e.target.value)},value:w})]})})]})},p=n.p+"static/media/close.96841b05.svg",j=n(20),b=n.n(j);function g(e){var t=e.isPlaying,n=void 0!==t&&t,r=e.onChange,i=void 0===r?function(){}:r;return Object(h.jsx)("div",{test:"playButton",className:"cursor-pointer",onClick:function(){i(!n)},children:n?Object(h.jsxs)("svg",{style:{fill:"#007bff"},className:"h-8 w-auto",height:"512",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 477.867 477.867",children:[Object(h.jsx)("g",{children:Object(h.jsx)("g",{children:Object(h.jsx)("path",{d:"M187.733,0H51.2c-9.426,0-17.067,7.641-17.067,17.067V460.8c0,9.426,7.641,17.067,17.067,17.067h136.533\r c9.426,0,17.067-7.641,17.067-17.067V17.067C204.8,7.641,197.159,0,187.733,0z M170.667,443.733h-102.4v-409.6h102.4V443.733z"})})}),Object(h.jsx)("g",{children:Object(h.jsx)("g",{children:Object(h.jsx)("path",{d:"M426.667,0H290.133c-9.426,0-17.067,7.641-17.067,17.067V460.8c0,9.426,7.641,17.067,17.067,17.067h136.533\r c9.426,0,17.067-7.641,17.067-17.067V17.067C443.733,7.641,436.092,0,426.667,0z M409.6,443.733H307.2v-409.6h102.4V443.733z"})})})]}):Object(h.jsx)("svg",{style:{fill:"#007bff"},className:"h-8 w-auto",height:"512",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 477.886 477.886",children:Object(h.jsx)("g",{children:Object(h.jsx)("g",{children:Object(h.jsx)("path",{d:"M476.091,231.332c-1.654-3.318-4.343-6.008-7.662-7.662L24.695,1.804C16.264-2.41,6.013,1.01,1.8,9.442\r c-1.185,2.371-1.801,4.986-1.8,7.637v443.733c-0.004,9.426,7.633,17.07,17.059,17.075c2.651,0.001,5.266-0.615,7.637-1.8\r L468.429,254.22C476.865,250.015,480.295,239.768,476.091,231.332z M34.133,433.198V44.692l388.506,194.253L34.133,433.198z"})})})})})}function x(e){var t=e.looping,n=void 0!==t&&t,r=e.onChange,i=void 0===r?function(){}:r;return Object(h.jsx)("div",{className:"cursor-pointer",onClick:function(){i(!n)},children:n?Object(h.jsxs)("svg",{className:"h-8 w-auto",style:{fill:"#007bff"},id:"Layer",enableBackground:"new 0 0 64 64",height:"512",viewBox:"0 0 64 64",width:"512",xmlns:"http://www.w3.org/2000/svg",children:[Object(h.jsx)("path",{d:"m19 25h9c1.104 0 2-.896 2-2s-.896-2-2-2h-9c-6.065 0-11 4.935-11 11s4.935 11 11 11h4.172l-1.586 1.586c-.781.781-.781 2.047 0 2.828.391.391.902.586 1.414.586s1.023-.195 1.414-.586l5-5c.781-.781.781-2.047 0-2.828l-5-5c-.781-.781-2.047-.781-2.828 0s-.781 2.047 0 2.828l1.586 1.586h-4.172c-3.859 0-7-3.141-7-7 0-3.86 3.141-7 7-7z"}),Object(h.jsx)("path",{d:"m45 21h-4.172l1.586-1.586c.781-.781.781-2.047 0-2.828s-2.047-.781-2.828 0l-5 5c-.781.781-.781 2.047 0 2.828l5 5c.391.391.902.586 1.414.586s1.023-.195 1.414-.586c.781-.781.781-2.047 0-2.828l-1.586-1.586h4.172c3.859 0 7 3.14 7 7 0 3.859-3.141 7-7 7h-9c-1.104 0-2 .896-2 2s.896 2 2 2h9c6.065 0 11-4.935 11-11s-4.935-11-11-11z"})]}):Object(h.jsxs)("svg",{className:"h-8 w-auto",style:{fill:" #dadada"},id:"Layer",enableBackground:"new 0 0 64 64",height:"512",viewBox:"0 0 64 64",width:"512",xmlns:"http://www.w3.org/2000/svg",children:[Object(h.jsx)("path",{d:"m19 25h9c1.104 0 2-.896 2-2s-.896-2-2-2h-9c-6.065 0-11 4.935-11 11s4.935 11 11 11h4.172l-1.586 1.586c-.781.781-.781 2.047 0 2.828.391.391.902.586 1.414.586s1.023-.195 1.414-.586l5-5c.781-.781.781-2.047 0-2.828l-5-5c-.781-.781-2.047-.781-2.828 0s-.781 2.047 0 2.828l1.586 1.586h-4.172c-3.859 0-7-3.141-7-7 0-3.86 3.141-7 7-7z"}),Object(h.jsx)("path",{d:"m45 21h-4.172l1.586-1.586c.781-.781.781-2.047 0-2.828s-2.047-.781-2.828 0l-5 5c-.781.781-.781 2.047 0 2.828l5 5c.391.391.902.586 1.414.586s1.023-.195 1.414-.586c.781-.781.781-2.047 0-2.828l-1.586-1.586h4.172c3.859 0 7 3.14 7 7 0 3.859-3.141 7-7 7h-9c-1.104 0-2 .896-2 2s.896 2 2 2h9c6.065 0 11-4.935 11-11s-4.935-11-11-11z"})]})})}var w=function(e){var t=e.isStopped,n=e.onChange,r=void 0===n?function(){}:n;return Object(h.jsx)("div",{test:"stopButton",className:"cursor-pointer",onClick:function(){return r(!t)},children:t?Object(h.jsx)("div",{className:"mx-2 h-auto my-1",style:{width:"2rem"},children:Object(h.jsx)("svg",{style:{fill:"#dadada"},className:"h-8 w-auto",id:"Capa_1",enableBackground:"new 0 0 512 512",height:"512",viewBox:"0 0 512 512",width:"512",xmlns:"http://www.w3.org/2000/svg",children:Object(h.jsxs)("g",{children:[Object(h.jsx)("path",{d:"m256 0c-141.159 0-256 114.841-256 256s114.841 256 256 256 256-114.841 256-256-114.841-256-256-256zm115 356c0 8.284-6.716 15-15 15h-200c-8.284 0-15-6.716-15-15v-200c0-8.284 6.716-15 15-15h200c8.284 0 15 6.716 15 15z"}),Object(h.jsx)("path",{d:"m171 171h170v170h-170z"})]})})}):Object(h.jsx)("div",{className:"mx-2 h-auto my-1",style:{width:"2rem"},children:Object(h.jsx)("svg",{className:"h-8 w-auto",style:{fill:"#007bff"},id:"Capa_1",enableBackground:"new 0 0 512 512",height:"512",viewBox:"0 0 512 512",width:"512",xmlns:"http://www.w3.org/2000/svg",children:Object(h.jsxs)("g",{children:[Object(h.jsx)("path",{d:"m256 0c-141.159 0-256 114.841-256 256s114.841 256 256 256 256-114.841 256-256-114.841-256-256-256zm115 356c0 8.284-6.716 15-15 15h-200c-8.284 0-15-6.716-15-15v-200c0-8.284 6.716-15 15-15h200c8.284 0 15 6.716 15 15z"}),Object(h.jsx)("path",{d:"m171 171h170v170h-170z"})]})})})})},O=n(2),y=n.n(O),T=n(3);var C=n(24),k=n(9),D=n.n(k);D.a.setDriver([D.a.INDEXEDDB,D.a.LOCALSTORAGE]);var I={getItem:function(){var e=Object(T.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.a.getItem(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setItem:function(e,t){return D.a.setItem(e,t)},removeItem:function(e){return D.a.removeItem(e)}},_=function(e){return I.setItem("timerCardIds",e)},N=function(){return I.getItem("timerCardIds")},S=function(e,t){return I.setItem("timerCard_".concat(e),t)},E=function(e){return I.getItem("timerCard_".concat(e))},R=function(e){return I.removeItem("timerCard_".concat(e))},A=n(7),L=n(5),B=n(6),G=n(14),z=n(13),P=n(21),M=n.n(P),V=n(11),U=n(22),W=function e(){Object(L.a)(this,e);for(var t={},n=this,r=0,i=0;i<arguments.length;i++){var a=arguments[i];switch(typeof a){case"string":t[a]=[],r++;break;case"object":n=a;break;default:throw new TypeError("Eventjs() only accepts string and object parameters")}}if(0===r)throw new Error("There should be at least one event name (string) for the Eventjs to be useful.");if(n===this&&!(this instanceof e))throw new ReferenceError('Eventjs is not called with "new" keyword and no parameter of type object is passed to it');function c(e){if("string"!==typeof e||!t[e])throw new ReferenceError("The event name does not exist in this event manager: "+e);return!0}return n.on=function(e){c(e);for(var n=1;n<arguments.length;n++){var r=arguments[n];-1===t[e].indexOf(r)&&t[e].push(r)}return this},n.off=function(e){switch(arguments.length){case 0:for(var r in t)t.hasOwnProperty(r)&&n.off(r);break;case 1:c(e),t[e].length=0;break;default:c(e);for(var i=1;i<arguments.length;i++){var a=arguments[i],o=t[e].indexOf(a);-1!==o&&t[e].splice(o,1)}}return this},n.trigger=function(e){c(e);for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);for(var a=t[e],o=[],s=0;s<a.length;s++){var u=a[s];try{u.apply(n,r)}catch(l){o.push({listener:u,error:l})}}if(o.length>0){var d=new Error("At least one of the event listeners was interrupted with an error. See errors");throw console.log(o),d.errors=o,d}return this},n},F=new Worker(n.n(U).a),J=function(e){Object(G.a)(n,e);var t=Object(z.a)(n);function n(){var e;return Object(L.a)(this,n),(e=t.call(this,"tick","finished")).time=void 0,e.playing=void 0,e.tick=function(t){setTimeout((function(){e.playing&&(e.time<0?(e.stop(),e.trigger("finished")):e.trigger("tick",e.time),e.time--)}),0)},e.time=0,e.playing=!1,e}return Object(B.a)(n,[{key:"play",value:function(e){this.time=e,this.playing=!0,F.addEventListener("message",this.tick)}},{key:"stop",value:function(){F.removeEventListener("message",this.tick),this.playing=!1,this.time=0}}]),n}(W),H=n(23),X=function(){function e(){Object(L.a)(this,e),this.player=void 0,this.handleId=void 0,this.player=void 0,this.handleId=void 0}return Object(B.a)(e,[{key:"play",value:function(e,t){var n=this;return!!e&&(this.player=new H.Howl({src:[e],format:["webm"],volume:1}),this.handleId=this.player.play(),t&&setTimeout((function(){n.player&&n.player.stop(n.handleId)}),1e3*t),!0)}},{key:"pause",value:function(){var e;null===(e=this.player)||void 0===e||e.pause(this.handleId)}},{key:"stop",value:function(){var e;null===(e=this.player)||void 0===e||e.stop(this.handleId)}}]),e}();function q(e,t){try{return new Notification(e,t),!0}catch(n){console.log(n)}navigator.serviceWorker.getRegistration().then((function(e){return!!e&&(e.showNotification("TimerCards",t),!0)})).catch((function(e){return console.log(e),!1}))}var $=function(e){if("Notification"in window){if("granted"===Notification.permission)return q("TimerCards",{body:e,vibrate:[200,100,200,100,200,100,200]});"denied"!==Notification.permission&&Notification.requestPermission().then((function(t){if("granted"===t)return q("TimerCards",{body:e,vibrate:[200,100,200,100,200,100,200]})}))}else alert("This browser does not support desktop notification")},K=n.p+"static/media/alarm.4ef57659.mp3",Q=function(){function e(){Object(L.a)(this,e)}return Object(B.a)(e,[{key:"save",value:function(e,t){return I.setItem("audio_meta_".concat(e),t)}},{key:"load",value:function(e){return I.getItem("audio_meta_".concat(e))}},{key:"delete",value:function(e){return I.removeItem("audio_meta_".concat(e))}}]),e}(),Y=new(function(){function e(){Object(L.a)(this,e),this.metaStorage=void 0,this.metaStorage=new Q}return Object(B.a)(e,[{key:"loadAudioIds",value:function(){return I.getItem("audioIds")}},{key:"saveAudioIds",value:function(e){return I.setItem("audioIds",e)}},{key:"save",value:function(){var e=Object(T.a)(y.a.mark((function e(t,n,r){var i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadAudioIds();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return(i=e.t0).push(t),e.next=9,this.saveAudioIds(i);case 9:return e.next=11,this.metaStorage.save(t,Object(A.a)(Object(A.a)({},r),{},{id:t}));case 11:return e.abrupt("return",I.setItem("audio_".concat(t),n));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"load",value:function(e){return I.getItem("audio_".concat(e))}},{key:"delete",value:function(){var e=Object(T.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadAudioIds();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return n=e.t0,e.next=8,this.saveAudioIds(n.filter((function(e){return e!==t})));case 8:return e.next=10,this.metaStorage.delete(t);case 10:return e.abrupt("return",I.removeItem("audio_".concat(t)));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editMeta",value:function(e,t){return this.metaStorage.save(e,t)}},{key:"loadMeta",value:function(e){return this.metaStorage.load(e)}}]),e}()),Z=function(e){Object(G.a)(n,e);var t=Object(z.a)(n);function n(e){var r;return Object(L.a)(this,n),(r=t.call(this)).timerCardData=void 0,r.timerCardId=void 0,r.countDownTimer=void 0,r.runningTimer=void 0,r.audioPlayer=void 0,r.onTimerTick=function(e){r.runningTimer.remainingTime=e,r.emitRunningTimer()},r.onTimerFinished=function(){try{var e,t=null===(e=r.timerCardData.currentTimer)||void 0===e?void 0:e.id,n=r.timerCardData.timerGroup.timers.findIndex((function(e){return e.id===t}));if(r.timerFinished(r.timerCardData.currentTimer.id),r.timerCardData.timerGroup.timers[n+1]){var i=r.timerCardData.timerGroup.timers[n+1];r.updateCardData((function(e){e.currentTimer={id:i.id,remainingTime:i.time,totalTime:i.time}})),r.emit("_play")}else if(r.timerCardData.looping){var a=r.timerCardData.timerGroup.timers[0];r.updateCardData((function(e){e.currentTimer={id:a.id,remainingTime:a.time,totalTime:a.time}})),r.emit("_play")}else r.emit("_stop")}catch(c){console.log(c),console.log(r.timerCardData)}},r.playCard=function(){if(r.timerCardData.currentTimer)r.updateCardData((function(e){e.status="playing"})),r.runningTimer.id=r.timerCardData.currentTimer.id,r.runningTimer.remainingTime=r.timerCardData.currentTimer.remainingTime,r.emitRunningTimer(),r.countDownTimer.off("tick"),r.countDownTimer.off("finished"),r.countDownTimer.on("tick",r.onTimerTick),r.countDownTimer.on("finished",r.onTimerFinished),r.countDownTimer.play(r.timerCardData.currentTimer.remainingTime);else{var e=r.timerCardData.timerGroup.timers[0];e&&(r.updateCardData((function(t){t.currentTimer={id:e.id,remainingTime:e.time,totalTime:e.time},t.status="playing"})),r.runningTimer.id=r.timerCardData.currentTimer.id,r.runningTimer.remainingTime=r.timerCardData.currentTimer.remainingTime,r.emitRunningTimer(),r.countDownTimer.off("tick"),r.countDownTimer.off("finished"),r.countDownTimer.on("tick",r.onTimerTick),r.countDownTimer.on("finished",r.onTimerFinished),r.countDownTimer.play(r.timerCardData.currentTimer.remainingTime))}},r.pauseCard=function(){r.countDownTimer.stop(),r.updateCardData((function(e){e.status="paused",e.currentTimer.remainingTime=r.runningTimer.remainingTime}))},r.stopCard=function(){r.countDownTimer.stop(),r.runningTimer={id:"",remainingTime:0},r.updateCardData((function(e){e.status="stopped",e.currentTimer=void 0})),r.emitRunningTimer()},r.timerCardId=e,r.timerCardData={id:r.timerCardId,timerGroup:{id:Object(u.a)(),name:"unnamed",timers:[]},looping:!1,status:"stopped",currentTimer:void 0},r.load(),r.audioPlayer=new X,r.runningTimer={id:"",remainingTime:0},r.countDownTimer=new J,r.on("new_connection",(function(){r.emitTimerCardData(),r.emitRunningTimer()})),r.on("_play",(function(){r.playCard()})),r.on("_stop",(function(){r.stopCard()})),r}return Object(B.a)(n,[{key:"emitTimerCardData",value:function(){this.emit("timer_data",this.timerCardData)}},{key:"emitRunningTimer",value:function(){this.emit("running_timer",Object(A.a)({},this.runningTimer))}},{key:"updateCardData",value:function(e){this.timerCardData=Object(V.a)(this.timerCardData,e),this.emitTimerCardData(),this.save()}},{key:"timerFinished",value:function(){var e=Object(T.a)(y.a.mark((function e(t){var n,r,i,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.timerCardData.timerGroup.name,r=this.timerCardData.timerGroup.timers.find((function(e){return e.id===t})),$("".concat(n," => ").concat(null===r||void 0===r?void 0:r.name," finished")),!(i=null===r||void 0===r?void 0:r.options.audioId)){e.next=11;break}return e.next=7,Y.load(i);case 7:a=e.sent,this.audioPlayer.play(URL.createObjectURL(a)),e.next=12;break;case 11:this.audioPlayer.play(K,2);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addTimer",value:function(e){var t=e.name,n=e.time;this.updateCardData((function(e){e.timerGroup.timers.push({id:Object(u.a)(),name:t,time:n,options:{}})}))}},{key:"removeTimer",value:function(e){this.updateCardData((function(t){t.timerGroup.timers=null===t||void 0===t?void 0:t.timerGroup.timers.filter((function(t){return t.id!==e}))}))}},{key:"toggleLoop",value:function(){this.updateCardData((function(e){e.looping=!e.looping}))}},{key:"editTimer",value:function(e,t){this.updateCardData((function(n){var r=n.timerGroup.timers.map((function(n){return n.id!==e?n:Object(A.a)(Object(A.a)({},n),t)}));n.timerGroup.timers=r}))}},{key:"addAudioToTimer",value:function(){var e=Object(T.a)(y.a.mark((function e(t,n){var r,i,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.timerCardData.timerGroup.timers.find((function(e){return e.id===t})),i=Object(u.a)(),e.next=4,Y.save(i,n,{name:"".concat(null===r||void 0===r?void 0:r.name,"_").concat(i)});case 4:if(a=null===r||void 0===r?void 0:r.options.audioId,e.t0=a,!e.t0){e.next=9;break}return e.next=9,Y.delete(a);case 9:this.updateCardData((function(e){e.timerGroup.timers=e.timerGroup.timers.map((function(e){return t!==e.id||(e.options.audioId=i),e}))}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeAudioFromTimer",value:function(){var e=Object(T.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"renameTimerCard",value:function(e){this.updateCardData((function(t){t.timerGroup.name=e}))}},{key:"onTimerCardDelete",value:function(){var e=Object(T.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.countDownTimer.stop(),this.countDownTimer.off("tick"),this.countDownTimer.off("finished"),e.next=5,this.deleteStorageData();case 5:this.removeAllListeners();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=JSON.parse(JSON.stringify(this.timerCardData));"playing"===e.status&&(e.status="paused",e.currentTimer.remainingTime=this.runningTimer.remainingTime),S(this.timerCardId,e)}},{key:"load",value:function(){var e=Object(T.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(this.timerCardId);case 2:(t=e.sent)&&(this.timerCardData=t,this.updateCardData((function(e){})),t.currentTimer&&(this.runningTimer={id:t.currentTimer.id,remainingTime:t.currentTimer.remainingTime},this.emitRunningTimer()));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteStorageData",value:function(){var e=Object(T.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.timerCardData.timerGroup.timers.forEach((function(e){var n=e.options.audioId;n&&t.push(Y.delete(n))})),e.next=4,Promise.all(t);case 4:return e.abrupt("return",R(this.timerCardId));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(M.a),ee=i.a.createContext({Timercards:{},actions:{},timerCardsId:[]});function te(e){var t=Object(r.useRef)({}),n=Object(r.useState)([]),i=Object(d.a)(n,2),a=i[0],c=i[1],o=Object(r.useCallback)((function(e){return new Z(e)}),[]);Object(r.useEffect)((function(){(function(){var e=Object(T.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:n.forEach((function(e){if(e){var n=o(e);t.current[e]=n}})),c(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o]),Object(r.useEffect)((function(){var e=function(){_(a),a.forEach((function(e){t.current[e].save()}))};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[a]);var s=function(){var e=Object(T.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.current[n].onTimerCardDelete();case 2:delete t.current[n],c((function(e){return e.filter((function(e){return e!==n}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(ee.Provider,{value:{Timercards:t.current,timerCardsId:a,actions:{addTimerCard:function(e){var n=o(e);t.current[e]=n,c((function(t){return[].concat(Object(C.a)(t),[e])}))},deleteTimerCard:s}},children:e.children})}function ne(e){var t,n=e.onDelete,a=e.timerCardId,c=e.className,o=Object(r.useState)((function(){return!1})),s=Object(d.a)(o,2),u=s[0],l=s[1],m=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n=Object(r.useRef)([]),i=Object(r.useState)(),a=Object(d.a)(i,2),c=a[0],o=a[1];function s(){return(s=Object(T.a)(y.a.mark((function r(){return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 2:e.current=r.sent,n.current=[],t.current=new MediaRecorder(e.current,{mimeType:"audio/webm"}),t.current.addEventListener("dataavailable",(function(e){e.data.size>0&&n.current.push(e.data)})),t.current.addEventListener("stop",(function(e){if(n.current){var t=Object(d.a)(n.current,1)[0];o(new Blob(n.current,{type:t.type}))}})),t.current.start(100);case 8:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return{record:function(){return s.apply(this,arguments)},stopRecording:function(){t.current&&(t.current.stop(),t.current=null),e.current&&(e.current.getTracks().forEach((function(e){return e.stop()})),e.current=null);var r=Object(d.a)(n.current,1)[0];return new Blob(n.current,{type:r.type})},audioBlob:c}}(),f=m.record,j=m.stopRecording,O=function(e){var t=i.a.useContext(ee).Timercards,n=Object(r.useState)(),a=Object(d.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)({id:"",remainingTime:0}),u=Object(d.a)(s,2),l=u[0],m=u[1],f=Object(r.useState)(null),h=Object(d.a)(f,2),v=h[0],p=h[1];return Object(r.useEffect)((function(){return p(t[e]),function(){p(null)}}),[t,e]),Object(r.useEffect)((function(){if(v){var e=function(e){o(e)},t=function(e){m(e)};return v.on("timer_data",e),v.on("running_timer",t),v.emit("new_connection"),function(){v.off("timer_data",e),v.off("running_timer",t)}}}),[v]),{timerCardData:c,runningTimer:l,actions:v}}(a),C=O.timerCardData,k=O.runningTimer,D=O.actions;return C?Object(h.jsxs)("div",{className:"bg-white rounded-lg ".concat(c),children:[Object(h.jsx)("div",{className:"flex flex-row-reverse",children:Object(h.jsx)("button",{test:"closeButton",className:"select-none outline-none rounded-full transition duration-150 hover:elevation-2 transform hover:scale-110",onClick:function(){n(a)},children:Object(h.jsx)("img",{className:"h-6 w-auto",src:p,alt:""})})}),Object(h.jsxs)("div",{className:"flex flex-col min-h-0",children:[Object(h.jsxs)("div",{className:"text-7xl font-mono tracking-tighter font-medium text-center select-none",children:[parseInt(k.remainingTime/60)<=9?"0"+parseInt(k.remainingTime/60):parseInt(k.remainingTime/60),":",k.remainingTime%60<=9?"0"+k.remainingTime%60:k.remainingTime%60]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"flex flex-row justify-between mx-2",children:[Object(h.jsx)("div",{className:"text-center font-medium cursor-pointer",children:Object(h.jsx)("div",{onClick:function(){return l(!0)},children:u?Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=e.currentTarget.title.value;t&&D.renameTimerCard(t),l(!1)},onBlur:function(e){e.preventDefault();var t=e.currentTarget.title.value;t&&D.renameTimerCard(t),l(!1)},children:Object(h.jsx)("input",{autoFocus:!0,type:"text",name:"title",defaultValue:C.timerGroup.name})}):C.timerGroup.name})}),Object(h.jsx)("div",{className:"px-0 user-select-none",children:Object(h.jsx)(x,{looping:null===C||void 0===C?void 0:C.looping,onChange:function(){D.toggleLoop()}})})]}),Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)("div",{className:" mx-2 h-8 w-auto my-1",children:Object(h.jsx)(g,{isPlaying:"playing"===(null===C||void 0===C?void 0:C.status),onChange:function(e){e?D.playCard():D.pauseCard()}})}),Object(h.jsx)(w,{isStopped:"stopped"===(null===C||void 0===C?void 0:C.status),onChange:function(e){e&&D.stopCard()}})]}),Object(h.jsx)("div",{className:"overflow-auto fancy-scrollbar px-1  ",children:null===C||void 0===C||null===(t=C.timerGroup)||void 0===t?void 0:t.timers.map((function(e){return e?Object(h.jsx)(v,{id:e.id,active:k.id===e.id,onDelete:function(t){D.removeTimer(e.id)},onNameChange:function(t){D.editTimer(e.id,{name:t})},onTimeChange:function(t){D.editTimer(e.id,{time:t})},name:e.name,time:e.time,onRecordStart:function(){f()},onRecordStop:function(){var t=j();D.addAudioToTimer(e.id,t)}},e.id):null}))}),Object(h.jsx)("div",{className:"flex justify-center mt-4",children:Object(h.jsx)("button",{test:"addButton",className:b.a.add_button,onClick:function(){D.addTimer({name:"unnamed",time:60})},children:"Add Timer"})})]})]}):Object(h.jsx)("div",{})}var re=function(e){var t=function(){var e=i.a.useContext(ee),t=e.actions;return{allTimerCardsId:e.timerCardsId,createTimerCard:function(e){t.addTimerCard(e)},deleteTimerCard:function(e){t.deleteTimerCard(e)}}}(),n=t.allTimerCardsId,a=t.createTimerCard,c=t.deleteTimerCard;return Object(r.useEffect)((function(){document.body.classList.remove("page-loading"),document.body.classList.add("page-loaded"),document.body.classList.add("bg-gray-50")}),[]),Object(h.jsxs)("div",{children:[Object(h.jsxs)("section",{className:s.a.container,children:[Object(h.jsx)("div",{className:s.a.header}),Object(h.jsx)("div",{className:s.a.body,children:Object(h.jsxs)("div",{className:" ".concat(s.a.hs," fancy-scrollbar"),style:{alignItems:"flex-start"},children:[n.map((function(e){return Object(h.jsx)(ne,{className:s.a.item,timerCardId:e,onDelete:function(e){c(e)}},e)})),Object(h.jsx)("div",{className:s.a.item,children:Object(h.jsx)("button",{test:"addTimerCardButton",className:"select-none bg-blue-600 text-white px-4 py-2 rounded-full",onClick:function(){a(Object(u.a)())},children:"Add Timer Card"})})]})})]}),Object(h.jsxs)("section",{id:"footer",className:"bg-gray-100 p-4",children:[Object(h.jsx)("h1",{className:"text-5xl font-bold text-center",children:"TimerCards"}),Object(h.jsxs)("p",{children:["I would love to hear your"," ",Object(h.jsx)("a",{className:"text-green-600",href:"mailto:davidxavier378@gmail.com",children:"Feedback / Sugesstions"})," "]})]})]})},ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(31);var ce=Object(r.createContext)({audioStore:{},addAudio:function(e){return""},deleteAudio:function(e){}}),oe=new(function(){function e(){Object(L.a)(this,e)}return Object(B.a)(e,[{key:"save",value:function(e){I.setItem("soundIds",e)}},{key:"load",value:function(){return I.getItem("soundIds")}},{key:"delete",value:function(){I.removeItem("soundIds")}}]),e}()),se=new(function(){function e(){Object(L.a)(this,e)}return Object(B.a)(e,[{key:"save",value:function(e,t){I.setItem("sound_".concat(e),t)}},{key:"load",value:function(e){return I.getItem("sound_".concat(e))}},{key:"delete",value:function(e){I.removeItem("sound_".concat(e))}}]),e}());function ue(e){var t=e.children,n=Object(r.useState)({}),i=Object(d.a)(n,2),a=i[0],c=i[1];function o(){return(o=Object(T.a)(y.a.mark((function e(){var t,n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.load();case 2:return t=e.sent,n=[],r={},null===t||void 0===t||t.forEach((function(e){n.push(se.load(e).then((function(t){t&&(r[e]=t)})))})),e.next=8,Promise.all(n);case 8:c(r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){o.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){oe.save(Object.keys(a))}),[a]),Object(h.jsx)(ce.Provider,{value:{audioStore:a,addAudio:function(e){var t=Object(u.a)();return se.save(t,e),c((function(n){return Object(V.a)(n,(function(n){n[t]=e}))})),t},deleteAudio:function(e){c((function(t){return Object(V.a)(t,(function(t){delete t[e]}))})),se.delete(e)}},children:t})}c.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(ue,{children:Object(h.jsx)(te,{children:Object(h.jsx)(re,{})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("activate",(function(e){e.waitUntil(caches.keys().then((function(e){return Promise.all(e.filter((function(e){return!1})).map((function(e){return caches.delete(e)})))})))})),window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ie?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ae(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ae(t,e)}))}}()},8:function(e,t,n){e.exports={hs:"App_hs__3g6EO",item:"App_item__2XBCw",container:"App_container__V-cl7",body:"App_body__2JsLX"}}},[[32,1,2]]]);
//# sourceMappingURL=main.6124ece5.chunk.js.map